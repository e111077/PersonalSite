<link rel="import" href="project-card.html">

<link rel="import" href="bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="bower_components/neon-animation/neon-shared-element-animatable-behavior.html">
<link rel="import" href="bower_components/neon-animation/animations/hero-animation.html">
<link rel="import" href="bower_components/neon-animation/animations/ripple-animation.html">
<link rel="import" href="bower_components/iron-resizable-behavior/iron-resizable-behavior.html">

<dom-module id="iron-resizable">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>
    <content></content>
  </template>
  <script>
    Polymer({
      is: 'iron-resizable',

      behaviors: [Polymer.IronResizableBehavior]
    });
  </script>
</dom-module>

<dom-module id="my-projects">
<template>
  <style>
    .title {
      @apply(--title-font);
    }

    .big.title {
      font-size: 5em;
      text-align: left;
    }

    .contentWrapper {
      padding: 1em;
      width: 80%;
      margin: 0 auto;
      margin-bottom: 1.5em;

      @apply(--layout);
      @apply(--layout-center-justified);
      @apply(--layout-wrap);
    }
  </style>
  <iron-resizable id="fullContentWrapper">
    <div class="big title">
      Projects
    </div>

    <div class="contentWrapper">
      <template is="dom-repeat" items="[[projectsArray]]"" as="project">
        <project-card data="[[project]]"></project-card>
      </template>
    </div>
  </iron-resizable>
</template>
<script>
  Polymer({
    is: 'my-projects',

    behaviors: [
      Polymer.NeonSharedElementAnimatableBehavior
    ],

    properties: {
      projects: {
        type: Object,
        observer: '_projectsChanged'
      },

      projectsArray: {
        type: Array
      },

      sharedElements: {
        type: Object
      },

      animationConfig: {
        value: function() {
          return {
            entry: [{
              name: 'hero-animation',
              id: 'hero',
              toPage: this
            }],

            exit: [{
              name: 'hero-animation',
              id: 'hero',
              fromPage: this,
              timing: {
                delay: 150,
                duration: 300
              }
            }, {
              name: 'ripple-animation',
              id: 'ripple',
              fromPage: this
            }]
          }
        }
      }
    },

    listeners: {
      'project-tap': '_onProjectTap'
    },

    _onProjectTap: function(evt) {
      this.sharedElements = {
        hero: evt.detail.node,
        ripple: evt.detail.node
      }
    },

    _projectsChanged: function(projects) {
      var output = [];
      for (var key in projects) {
        output.push(projects[key]);
      }

      this.projectsArray = output;
    }
  });
</script>
</dom-module>